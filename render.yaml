# Render blueprint: backend API + frontend static site
# Deploy: Dashboard > New > Blueprint > connect repo, select this file.
# You'll be prompted for the backend secrets below on first create.

services:
  # Backend: FastAPI (Docker)
  - type: web
    name: brander-agent
    runtime: docker
    plan: free
    dockerfilePath: ./Dockerfile
    healthCheckPath: /api/health
    envVars:
      - key: GOOGLE_API_KEY
        sync: false
      - key: YDC_API_KEY
        sync: false
      - key: COMPOSIO_API_KEY
        sync: false

  # Frontend: Next.js static export (served from CDN)
  - type: web
    name: brander-agent-web
    runtime: static
    plan: free
    buildCommand: npm ci && npm run build
    staticPublishPath: out
    envVars:
      # Backend URL â€” must match backend service name: https://<name>.onrender.com
      - key: NEXT_PUBLIC_API_URL
        value: https://brander-agent.onrender.com
